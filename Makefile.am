include $(top_srcdir)/common.mk

ACLOCAL_AMFLAGS = -I m4

EXTRA_DIST =    ${top_srcdir}/README.rst \
		${top_srcdir}/LICENSE \
		${top_srcdir}/common.mk \
		${top_srcdir}/src/header.h \
		${top_srcdir}/tests/data/common/nvdcve-2.0-2002.meta
NULL =
CLEANFILES =
AM_CFLAGS =
SUBDIRS = src

if COVERAGE
coverage:
	mkdir -p coverage
	lcov --compat-libtool --directory . --capture --output-file coverage/report
	lcov --remove coverage/report 'tests/*' '/usr/*' --output-file coverage/report
	genhtml -o coverage/ coverage/report
endif


if ENABLE_UNIT_TESTS

TESTS = \
	check_common

check_PROGRAMS = $(TESTS)

# Core tests
check_common_SOURCES = \
	tests/check-common.c

check_common_CFLAGS = \
	$(CHECK_CFLAGS) \
	$(AM_CFLAGS)

check_common_LDADD = \
	$(CHECK_LIBS) \
	src/common/libcvecommon.la


@VALGRIND_CHECK_RULES@

endif
